## Redis大key问题
大key的风险：
1.读写大key会导致超时严重，甚至阻塞服务。
2.如果删除大key，DEL命令可能阻塞Redis进程数十秒，使得其他请求阻塞，对应用程序和Redis集群可用性造成严重的影响。
3.建议每个key不要超过M级别。

简单的解决问题：

将大key进行分割，为了均匀分割，可以对field进行hash并通过质数N取余，将余数加到key上面，我们取质数N为997。

## 热key问题

热key问题就是，突然有几十万的请求去访问redis上的某个特定key。那么，这样会造成流量过于集中，达到物理网卡上限，从而导致这台redis的服务器宕机。    
**怎么发现热key：**  
方法一:凭借业务经验，进行预估哪些是热key  
方法二:在客户端进行收集  
方法三:在Proxy层做收集  
方法四:用redis自带命令：

(1)monitor命令，该命令可以实时抓取出redis服务器接收到的命令，然后写代码统计出热key是啥  
(2)hotkeys参数，redis 4.0.3提供了redis-cli的热点key发现功能，执行redis-cli时加上–hotkeys选项即可。但是该参数在执行的时候，如果key比较多，执行起来比较慢   

方法五:自己抓包评估  
**解决办法：**   
(1)利用二级缓存：比如利用ehcache，或者一个HashMap都可以。  
(2)备份热key：这个方案也很简单。不要让key走到同一台redis上不就行了